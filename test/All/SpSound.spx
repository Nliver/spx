

import "fmt"
import "math"




onMsg "testSound", => {
	onTestStart(this)	

	// 1. Sprite::Play (wait=true)	
	say "test playAndWait sound (wait=true)"
	playAndWait "sound1"
	say "test playAndWait sound done (wait=true)"
	wait 0.1
	// 2. Sprite::Play (wait=false)
	say "test playAndWait sound (wait=false)"	
	wait 0.1
	play "sound1"
	say "test playAndWait sound done (wait=false)"
	wait 0.1
	// 3. Game::StopAllSounds	
	stopAllSounds()

	// 4. Sprite::ChangeVolume	
	say fmt.Sprintf("test change sound volume : 150 , current %v", volume())
	changeVolume 50
	assertFloat(volume(), 150, "Sprite::ChangeVolume")
	playAndWait "sound1"
	wait 1
	// 5. Sprite::SetVolume	
	say "test set sound volume : 100"
	setVolume 100
	assertFloat(volume(), 100, "Sprite::SetVolume")
	playAndWait "sound1"
	// 6. Sprite::Volume
	assertFloat(volume(), 100, "Sprite::Volume")

	// 7. Game::ChangeGraphicEffect	
	say "test change sound effect : pitch (150)"
	changeSoundEffect SoundPitchEffect, 50  // pitch 150
	playAndWait "sound1"
	// 8. Game::SetGraphicEffect	
	say "test set sound effect : pitch (150)"
	setSoundEffect SoundPitchEffect, 50  // pitch 50
	playAndWait "sound1"
	// 9. Game::ClearSoundEffects	
	say "test clear sound effect : pitch (0)"
	playAndWait "sound1"


	say "test sound effect : pan"
	// 10. Game::ChangeGraphicEffect	
	say "test change sound effect : pan (-100) left"
	changeSoundEffect SoundPanEffect, -100  // left
	playAndWait "sound1"
	// 11. Game::SetGraphicEffect	
	say "test set sound effect : pan (100) right"
	setSoundEffect SoundPanEffect, 100  // right
	playAndWait "sound1"
	// 12. Game::ClearSoundEffects	
	say "test clear sound effect : pan (0) normal"
	playAndWait "sound1"



    onTestDone(this)
}